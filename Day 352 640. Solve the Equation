class Solution {
    public String solveEquation(String equation) {
        String[] sides = equation.split("=");
        int[] left = eval(sides[0]);
        int[] right = eval(sides[1]);

        int a = left[0] - right[0];
        int b = right[1] - left[1];

        if (a == 0) return b == 0 ? "Infinite solutions" : "No solution";
        return "x=" + (b / a);
    }

    private int[] eval(String s) {
        int coef = 0;
        int cons = 0;
        int i = 0;
        int n = s.length();
        int sign = 1;

        while (i < n) {
            char c = s.charAt(i);
            if (c == '+') {
                sign = 1;
                i++;
                continue;
            }
            if (c == '-') {
                sign = -1;
                i++;
                continue;
            }

            int num = 0;
            boolean hasNum = false;
            while (i < n && Character.isDigit(s.charAt(i))) {
                hasNum = true;
                num = num * 10 + (s.charAt(i) - '0');
                i++;
            }

            if (i < n && s.charAt(i) == 'x') {
                coef += sign * (hasNum ? num : 1);
                i++;
            } else {
                cons += sign * num;
            }
        }

        return new int[] { coef, cons };
    }
}
